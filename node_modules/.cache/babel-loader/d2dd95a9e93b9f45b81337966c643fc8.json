{"ast":null,"code":"var _jsxFileName = \"/Users/jeongseongdu/Downloads/git3/TEAM_5B/src/components/SearchInput/index.tsx\",\n    _s = $RefreshSig$();\n\nimport { useCallback, useEffect, useState } from 'react';\nimport { useQuery } from 'react-query';\nimport { useQueryDebounce } from 'hooks';\nimport { fetcher } from 'utils';\nimport { useUnmount } from 'react-use';\nimport DesktopSearchInput from './DesktopSearchInput';\nimport MobileSearchInput from './MobileSearchInput';\nimport styles from './search-input.module.scss';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction SearchInput() {\n  _s();\n\n  const [isSearching, setIsSearching] = useState(false);\n  const [searchValue, setSearchValue] = useState('');\n  const [cursor, setCursor] = useState(-1);\n  const searchInput = useQueryDebounce(searchValue, 500);\n  const {\n    data\n  } = useQuery(['data', searchInput], () => fetcher(searchInput), {\n    enabled: !!searchInput\n  });\n  const keyboardNavigation = useCallback(e => {\n    if (data === undefined) return;\n\n    if (e.key === 'ArrowDown' && isSearching) {\n      setCursor(prev => prev < data.length - 1 ? prev + 1 : prev);\n      console.log('!!!');\n    }\n\n    if (e.key === 'ArrowUp' && isSearching) {\n      setCursor(prev => prev > 0 ? prev - 1 : 0);\n      console.log('!!!');\n    }\n\n    if (e.key === 'Enter') {\n      setCursor(-1);\n      setIsSearching(false);\n    }\n  }, [data, isSearching, setCursor, setIsSearching]);\n  useEffect(() => {\n    window.addEventListener('keydown', keyboardNavigation);\n  }, [keyboardNavigation]);\n  useUnmount(() => {\n    window.removeEventListener('keydown', keyboardNavigation);\n  });\n\n  const mouseDown = idx => {\n    setCursor(idx);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: styles['search-input'],\n    children: [/*#__PURE__*/_jsxDEV(MobileSearchInput, {\n      searchValue: searchValue,\n      setSearchValue: setSearchValue,\n      isSearching: isSearching,\n      setIsSearching: setIsSearching,\n      data: data,\n      cursor: cursor,\n      mouseDown: mouseDown\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(DesktopSearchInput, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 55,\n    columnNumber: 5\n  }, this);\n}\n\n_s(SearchInput, \"T/vWmT5xKl+62cT6TvogZ0N2kds=\", false, function () {\n  return [useQueryDebounce, useQuery, useUnmount];\n});\n\n_c = SearchInput;\nexport default SearchInput;\n\nvar _c;\n\n$RefreshReg$(_c, \"SearchInput\");","map":{"version":3,"names":["useCallback","useEffect","useState","useQuery","useQueryDebounce","fetcher","useUnmount","DesktopSearchInput","MobileSearchInput","styles","SearchInput","isSearching","setIsSearching","searchValue","setSearchValue","cursor","setCursor","searchInput","data","enabled","keyboardNavigation","e","undefined","key","prev","length","console","log","window","addEventListener","removeEventListener","mouseDown","idx"],"sources":["/Users/jeongseongdu/Downloads/git3/TEAM_5B/src/components/SearchInput/index.tsx"],"sourcesContent":["import { useCallback, useEffect, useMemo, useRef, useState } from 'react';\nimport { useQuery } from 'react-query';\nimport { useQueryDebounce } from 'hooks';\nimport { fetcher } from 'utils';\nimport { useKeys } from 'hooks/useKeys';\nimport { useUnmount } from 'react-use';\n\nimport DesktopSearchInput from './DesktopSearchInput';\nimport MobileSearchInput from './MobileSearchInput';\n\nimport styles from './search-input.module.scss';\n\nfunction SearchInput() {\n  const [isSearching, setIsSearching] = useState<boolean>(false);\n  const [searchValue, setSearchValue] = useState<string>('');\n  const [cursor, setCursor] = useState(-1);\n\n  const searchInput = useQueryDebounce(searchValue, 500);\n  const { data } = useQuery(['data', searchInput], () => fetcher(searchInput), {\n    enabled: !!searchInput,\n  });\n\n  const keyboardNavigation = useCallback(\n    (e: KeyboardEvent) => {\n      if (data === undefined) return;\n\n      if (e.key === 'ArrowDown' && isSearching) {\n        setCursor((prev) => (prev < data.length - 1 ? prev + 1 : prev));\n        console.log('!!!');\n      }\n      if (e.key === 'ArrowUp' && isSearching) {\n        setCursor((prev) => (prev > 0 ? prev - 1 : 0));\n        console.log('!!!');\n      }\n      if (e.key === 'Enter') {\n        setCursor(-1);\n        setIsSearching(false);\n      }\n    },\n    [data, isSearching, setCursor, setIsSearching]\n  );\n\n  useEffect(() => {\n    window.addEventListener('keydown', keyboardNavigation);\n  }, [keyboardNavigation]);\n\n  useUnmount(() => {\n    window.removeEventListener('keydown', keyboardNavigation);\n  });\n\n  const mouseDown = (idx: number) => {\n    setCursor(idx);\n  };\n  return (\n    <div className={styles['search-input']}>\n      <MobileSearchInput\n        searchValue={searchValue}\n        setSearchValue={setSearchValue}\n        isSearching={isSearching}\n        setIsSearching={setIsSearching}\n        data={data}\n        cursor={cursor}\n        mouseDown={mouseDown}\n      />\n      <DesktopSearchInput />\n    </div>\n  );\n}\n\nexport default SearchInput;\n"],"mappings":";;;AAAA,SAASA,WAAT,EAAsBC,SAAtB,EAAkDC,QAAlD,QAAkE,OAAlE;AACA,SAASC,QAAT,QAAyB,aAAzB;AACA,SAASC,gBAAT,QAAiC,OAAjC;AACA,SAASC,OAAT,QAAwB,OAAxB;AAEA,SAASC,UAAT,QAA2B,WAA3B;AAEA,OAAOC,kBAAP,MAA+B,sBAA/B;AACA,OAAOC,iBAAP,MAA8B,qBAA9B;AAEA,OAAOC,MAAP,MAAmB,4BAAnB;;;AAEA,SAASC,WAAT,GAAuB;EAAA;;EACrB,MAAM,CAACC,WAAD,EAAcC,cAAd,IAAgCV,QAAQ,CAAU,KAAV,CAA9C;EACA,MAAM,CAACW,WAAD,EAAcC,cAAd,IAAgCZ,QAAQ,CAAS,EAAT,CAA9C;EACA,MAAM,CAACa,MAAD,EAASC,SAAT,IAAsBd,QAAQ,CAAC,CAAC,CAAF,CAApC;EAEA,MAAMe,WAAW,GAAGb,gBAAgB,CAACS,WAAD,EAAc,GAAd,CAApC;EACA,MAAM;IAAEK;EAAF,IAAWf,QAAQ,CAAC,CAAC,MAAD,EAASc,WAAT,CAAD,EAAwB,MAAMZ,OAAO,CAACY,WAAD,CAArC,EAAoD;IAC3EE,OAAO,EAAE,CAAC,CAACF;EADgE,CAApD,CAAzB;EAIA,MAAMG,kBAAkB,GAAGpB,WAAW,CACnCqB,CAAD,IAAsB;IACpB,IAAIH,IAAI,KAAKI,SAAb,EAAwB;;IAExB,IAAID,CAAC,CAACE,GAAF,KAAU,WAAV,IAAyBZ,WAA7B,EAA0C;MACxCK,SAAS,CAAEQ,IAAD,IAAWA,IAAI,GAAGN,IAAI,CAACO,MAAL,GAAc,CAArB,GAAyBD,IAAI,GAAG,CAAhC,GAAoCA,IAAhD,CAAT;MACAE,OAAO,CAACC,GAAR,CAAY,KAAZ;IACD;;IACD,IAAIN,CAAC,CAACE,GAAF,KAAU,SAAV,IAAuBZ,WAA3B,EAAwC;MACtCK,SAAS,CAAEQ,IAAD,IAAWA,IAAI,GAAG,CAAP,GAAWA,IAAI,GAAG,CAAlB,GAAsB,CAAlC,CAAT;MACAE,OAAO,CAACC,GAAR,CAAY,KAAZ;IACD;;IACD,IAAIN,CAAC,CAACE,GAAF,KAAU,OAAd,EAAuB;MACrBP,SAAS,CAAC,CAAC,CAAF,CAAT;MACAJ,cAAc,CAAC,KAAD,CAAd;IACD;EACF,CAhBmC,EAiBpC,CAACM,IAAD,EAAOP,WAAP,EAAoBK,SAApB,EAA+BJ,cAA/B,CAjBoC,CAAtC;EAoBAX,SAAS,CAAC,MAAM;IACd2B,MAAM,CAACC,gBAAP,CAAwB,SAAxB,EAAmCT,kBAAnC;EACD,CAFQ,EAEN,CAACA,kBAAD,CAFM,CAAT;EAIAd,UAAU,CAAC,MAAM;IACfsB,MAAM,CAACE,mBAAP,CAA2B,SAA3B,EAAsCV,kBAAtC;EACD,CAFS,CAAV;;EAIA,MAAMW,SAAS,GAAIC,GAAD,IAAiB;IACjChB,SAAS,CAACgB,GAAD,CAAT;EACD,CAFD;;EAGA,oBACE;IAAK,SAAS,EAAEvB,MAAM,CAAC,cAAD,CAAtB;IAAA,wBACE,QAAC,iBAAD;MACE,WAAW,EAAEI,WADf;MAEE,cAAc,EAAEC,cAFlB;MAGE,WAAW,EAAEH,WAHf;MAIE,cAAc,EAAEC,cAJlB;MAKE,IAAI,EAAEM,IALR;MAME,MAAM,EAAEH,MANV;MAOE,SAAS,EAAEgB;IAPb;MAAA;MAAA;MAAA;IAAA,QADF,eAUE,QAAC,kBAAD;MAAA;MAAA;MAAA;IAAA,QAVF;EAAA;IAAA;IAAA;IAAA;EAAA,QADF;AAcD;;GAvDQrB,W;UAKaN,gB,EACHD,Q,EA4BjBG,U;;;KAlCOI,W;AAyDT,eAAeA,WAAf"},"metadata":{},"sourceType":"module"}