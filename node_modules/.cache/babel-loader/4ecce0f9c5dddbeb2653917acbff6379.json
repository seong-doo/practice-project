{"ast":null,"code":"import _slicedToArray from\"/Users/jeongseongdu/Downloads/git3/TEAM_5B/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useEffect,useState}from'react';import{useIsFetching}from'react-query';import{MagnifierIcon}from'assets';import{useAppDispatch,useAppSelector,useQueryDebounce}from'hooks';import{setSearchString}from'store';import Match from'./Match';import styles from'./search-list.module.scss';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function SearchList(_ref){var listRef=_ref.listRef;var _useState=useState(true),_useState2=_slicedToArray(_useState,2),isMobile=_useState2[0],setIsMobile=_useState2[1];var dispatch=useAppDispatch();var filteredList=useAppSelector(function(state){return state.filteredList.item;});var searchString=useAppSelector(function(state){return state.searchString.searchString;});var searchInput=useQueryDebounce(searchString,500);var isFetching=useIsFetching(['data',searchInput]);var containerType=isMobile?styles['mobile-list-container']:styles['desktop-list-container'];var whileSearching=function whileSearching(){if(filteredList.length!==0)return null;if(isFetching){return/*#__PURE__*/_jsx(\"li\",{className:styles['while-searching'],children:\"\\uAC80\\uC0C9 \\uC911..\"});}return/*#__PURE__*/_jsx(\"li\",{className:styles['while-searching'],children:\"\\uAC80\\uC0C9\\uC5B4 \\uC5C6\\uC74C\"});};var isListVisible=searchString.length!==0?'flex':'none';var onClick=function onClick(e){var target=e.currentTarget.dataset.name;dispatch(setSearchString(target));};var onKeyDown=function onKeyDown(e){e.preventDefault();if(e.key==='ArrowDown'){if(e.currentTarget.nextElementSibling){var nextTarget=e.currentTarget.nextElementSibling;nextTarget.focus();}}if(e.key==='ArrowUp'){if(e.currentTarget.previousElementSibling){var prevTarget=e.currentTarget.previousElementSibling;prevTarget.focus();}}if(e.key==='Enter'){var target=e.currentTarget.dataset.name;dispatch(setSearchString(target));}};var onMouseEnter=function onMouseEnter(e){if(e.currentTarget){e.currentTarget.focus();}};useEffect(function(){var _listRef$current,_listRef$current$pare;if(((_listRef$current=listRef.current)===null||_listRef$current===void 0?void 0:(_listRef$current$pare=_listRef$current.parentElement)===null||_listRef$current$pare===void 0?void 0:_listRef$current$pare.dataset.id)==='desktop'){setIsMobile(false);}},[listRef]);return/*#__PURE__*/_jsxs(\"ul\",{role:\"menu\",tabIndex:-1,ref:listRef,className:containerType,style:{display:isListVisible},children:[whileSearching(),filteredList.map(function(item,idx){var key=\"\".concat(item.sickCd,\"-\").concat(idx);return/*#__PURE__*/_jsxs(\"li\",{role:\"menuitem\",onClick:onClick,onKeyDown:onKeyDown,onMouseEnter:onMouseEnter,tabIndex:0,\"data-name\":item.sickNm,className:styles.item,children:[/*#__PURE__*/_jsx(MagnifierIcon,{}),/*#__PURE__*/_jsx(\"span\",{className:styles.name,children:/*#__PURE__*/_jsx(Match,{sickNm:item.sickNm})})]},key);})]});}export default SearchList;","map":{"version":3,"names":["useEffect","useState","useIsFetching","MagnifierIcon","useAppDispatch","useAppSelector","useQueryDebounce","setSearchString","Match","styles","SearchList","listRef","isMobile","setIsMobile","dispatch","filteredList","state","item","searchString","searchInput","isFetching","containerType","whileSearching","length","isListVisible","onClick","e","target","currentTarget","dataset","name","onKeyDown","preventDefault","key","nextElementSibling","nextTarget","focus","previousElementSibling","prevTarget","onMouseEnter","current","parentElement","id","display","map","idx","sickCd","sickNm"],"sources":["/Users/jeongseongdu/Downloads/git3/TEAM_5B/src/components/SearchList/index.tsx"],"sourcesContent":["import {\n  KeyboardEvent,\n  MouseEvent,\n  RefObject,\n  useEffect,\n  useState,\n} from 'react';\nimport { useIsFetching } from 'react-query';\n\nimport { MagnifierIcon } from 'assets';\nimport { useAppDispatch, useAppSelector, useQueryDebounce } from 'hooks';\nimport { setSearchString } from 'store';\n\nimport { IItem } from 'types/search.d';\n\nimport Match from './Match';\n\nimport styles from './search-list.module.scss';\n\ntype TSearchListProps = {\n  listRef: RefObject<HTMLUListElement>;\n};\n\nfunction SearchList({ listRef }: TSearchListProps) {\n  const [isMobile, setIsMobile] = useState<boolean>(true);\n\n  const dispatch = useAppDispatch();\n  const filteredList = useAppSelector((state) => state.filteredList.item);\n  const searchString = useAppSelector(\n    (state) => state.searchString.searchString\n  );\n\n  const searchInput = useQueryDebounce(searchString, 500);\n\n  const isFetching = useIsFetching(['data', searchInput]);\n\n  const containerType = isMobile\n    ? styles['mobile-list-container']\n    : styles['desktop-list-container'];\n\n  const whileSearching = () => {\n    if (filteredList.length !== 0) return null;\n    if (isFetching) {\n      return <li className={styles['while-searching']}>검색 중..</li>;\n    }\n    return <li className={styles['while-searching']}>검색어 없음</li>;\n  };\n\n  const isListVisible = searchString.length !== 0 ? 'flex' : 'none';\n\n  const onClick = (e: MouseEvent<HTMLLIElement>) => {\n    const target = e.currentTarget.dataset.name as string;\n    dispatch(setSearchString(target));\n  };\n\n  const onKeyDown = (e: KeyboardEvent<HTMLLIElement>) => {\n    e.preventDefault();\n    if (e.key === 'ArrowDown') {\n      if (e.currentTarget.nextElementSibling) {\n        const nextTarget = e.currentTarget.nextElementSibling as HTMLLIElement;\n        nextTarget.focus();\n      }\n    }\n    if (e.key === 'ArrowUp') {\n      if (e.currentTarget.previousElementSibling) {\n        const prevTarget = e.currentTarget\n          .previousElementSibling as HTMLLIElement;\n        prevTarget.focus();\n      }\n    }\n    if (e.key === 'Enter') {\n      const target = e.currentTarget.dataset.name as string;\n      dispatch(setSearchString(target));\n    }\n  };\n\n  const onMouseEnter = (e: MouseEvent<HTMLLIElement>) => {\n    if (e.currentTarget) {\n      e.currentTarget.focus();\n    }\n  };\n\n  useEffect(() => {\n    if (listRef.current?.parentElement?.dataset.id === 'desktop') {\n      setIsMobile(false);\n    }\n  }, [listRef]);\n\n  return (\n    <ul\n      role=\"menu\"\n      tabIndex={-1}\n      ref={listRef}\n      className={containerType}\n      style={{ display: isListVisible }}\n    >\n      {whileSearching()}\n      {filteredList.map((item: IItem, idx: number) => {\n        const key = `${item.sickCd}-${idx}`;\n        return (\n          <li\n            key={key}\n            role=\"menuitem\"\n            onClick={onClick}\n            onKeyDown={onKeyDown}\n            onMouseEnter={onMouseEnter}\n            tabIndex={0}\n            data-name={item.sickNm}\n            className={styles.item}\n          >\n            <MagnifierIcon />\n            <span className={styles.name}>\n              <Match sickNm={item.sickNm} />\n            </span>\n          </li>\n        );\n      })}\n    </ul>\n  );\n}\n\nexport default SearchList;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}