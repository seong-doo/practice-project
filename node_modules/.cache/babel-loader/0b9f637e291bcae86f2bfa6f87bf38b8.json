{"ast":null,"code":"var _jsxFileName = \"/Users/jeongseongdu/Downloads/git3/TEAM_5B/src/components/SearchList/index.tsx\",\n    _s = $RefreshSig$();\n\nimport { useEffect, useState } from 'react';\nimport { useIsFetching } from 'react-query';\nimport { MagnifierIcon } from 'assets';\nimport { useAppDispatch, useAppSelector, useQueryDebounce } from 'hooks';\nimport { setSearchString } from 'store';\nimport Match from './Match';\nimport styles from './search-list.module.scss';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction SearchList(_ref) {\n  _s();\n\n  let {\n    listRef\n  } = _ref;\n  const [isMobile, setIsMobile] = useState(true);\n  const dispatch = useAppDispatch();\n  const filteredList = useAppSelector(state => state.filteredList.item);\n  const searchString = useAppSelector(state => state.searchString.searchString);\n  const searchInput = useQueryDebounce(searchString, 500);\n  const isFetching = useIsFetching(['data', searchInput]);\n  const containerType = isMobile ? styles['mobile-list-container'] : styles['desktop-list-container'];\n\n  const whileSearching = () => {\n    if (filteredList.length !== 0) return null;\n\n    if (isFetching) {\n      return /*#__PURE__*/_jsxDEV(\"li\", {\n        className: styles['while-searching'],\n        children: \"\\uAC80\\uC0C9 \\uC911..\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 44,\n        columnNumber: 14\n      }, this);\n    }\n\n    return /*#__PURE__*/_jsxDEV(\"li\", {\n      className: styles['while-searching'],\n      children: \"\\uAC80\\uC0C9\\uC5B4 \\uC5C6\\uC74C\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 12\n    }, this);\n  };\n\n  const isListVisible = searchString.length !== 0 ? 'flex' : 'none';\n\n  const onClick = e => {\n    const target = e.currentTarget.dataset.name;\n    dispatch(setSearchString(target));\n  };\n\n  const onKeyDown = e => {\n    e.preventDefault();\n\n    if (e.key === 'ArrowDown') {\n      if (e.currentTarget.nextElementSibling) {\n        const nextTarget = e.currentTarget.nextElementSibling;\n        nextTarget.focus();\n      }\n    }\n\n    if (e.key === 'ArrowUp') {\n      if (e.currentTarget.previousElementSibling) {\n        const prevTarget = e.currentTarget.previousElementSibling;\n        prevTarget.focus();\n      }\n    }\n\n    if (e.key === 'Enter') {\n      const target = e.currentTarget.dataset.name;\n      dispatch(setSearchString(target));\n    }\n  };\n\n  const onMouseEnter = e => {\n    if (e.currentTarget) {\n      e.currentTarget.focus();\n    }\n  };\n\n  useEffect(() => {\n    var _listRef$current, _listRef$current$pare;\n\n    if (((_listRef$current = listRef.current) === null || _listRef$current === void 0 ? void 0 : (_listRef$current$pare = _listRef$current.parentElement) === null || _listRef$current$pare === void 0 ? void 0 : _listRef$current$pare.dataset.id) === 'desktop') {\n      setIsMobile(false);\n    }\n  }, [listRef]);\n  return /*#__PURE__*/_jsxDEV(\"ul\", {\n    role: \"menu\",\n    tabIndex: -1,\n    ref: listRef,\n    className: containerType,\n    style: {\n      display: isListVisible\n    },\n    children: [whileSearching(), filteredList.map((item, idx) => {\n      const key = `${item.sickCd}-${idx}`;\n      return /*#__PURE__*/_jsxDEV(\"li\", {\n        role: \"menuitem\",\n        onClick: onClick,\n        onKeyDown: onKeyDown,\n        onMouseEnter: onMouseEnter,\n        tabIndex: 0,\n        \"data-name\": item.sickNm,\n        className: styles.item,\n        children: [/*#__PURE__*/_jsxDEV(MagnifierIcon, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: styles.name,\n          children: /*#__PURE__*/_jsxDEV(Match, {\n            sickNm: item.sickNm\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 113,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 13\n        }, this)]\n      }, key, true, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 11\n      }, this);\n    })]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 90,\n    columnNumber: 5\n  }, this);\n}\n\n_s(SearchList, \"Jl7anjtuA81t/xyL1Ga/pTcMq0M=\", false, function () {\n  return [useAppDispatch, useAppSelector, useAppSelector, useQueryDebounce, useIsFetching];\n});\n\n_c = SearchList;\nexport default SearchList;\n\nvar _c;\n\n$RefreshReg$(_c, \"SearchList\");","map":{"version":3,"names":["useEffect","useState","useIsFetching","MagnifierIcon","useAppDispatch","useAppSelector","useQueryDebounce","setSearchString","Match","styles","SearchList","listRef","isMobile","setIsMobile","dispatch","filteredList","state","item","searchString","searchInput","isFetching","containerType","whileSearching","length","isListVisible","onClick","e","target","currentTarget","dataset","name","onKeyDown","preventDefault","key","nextElementSibling","nextTarget","focus","previousElementSibling","prevTarget","onMouseEnter","current","parentElement","id","display","map","idx","sickCd","sickNm"],"sources":["/Users/jeongseongdu/Downloads/git3/TEAM_5B/src/components/SearchList/index.tsx"],"sourcesContent":["import {\n  KeyboardEvent,\n  MouseEvent,\n  RefObject,\n  useEffect,\n  useState,\n} from 'react';\nimport { useIsFetching } from 'react-query';\n\nimport { MagnifierIcon } from 'assets';\nimport { useAppDispatch, useAppSelector, useQueryDebounce } from 'hooks';\nimport { setSearchString } from 'store';\n\nimport { IItem } from 'types/search.d';\n\nimport Match from './Match';\n\nimport styles from './search-list.module.scss';\n\ntype TSearchListProps = {\n  listRef: RefObject<HTMLUListElement>;\n};\n\nfunction SearchList({ listRef }: TSearchListProps) {\n  const [isMobile, setIsMobile] = useState<boolean>(true);\n\n  const dispatch = useAppDispatch();\n  const filteredList = useAppSelector((state) => state.filteredList.item);\n  const searchString = useAppSelector(\n    (state) => state.searchString.searchString\n  );\n\n  const searchInput = useQueryDebounce(searchString, 500);\n\n  const isFetching = useIsFetching(['data', searchInput]);\n\n  const containerType = isMobile\n    ? styles['mobile-list-container']\n    : styles['desktop-list-container'];\n\n  const whileSearching = () => {\n    if (filteredList.length !== 0) return null;\n    if (isFetching) {\n      return <li className={styles['while-searching']}>검색 중..</li>;\n    }\n    return <li className={styles['while-searching']}>검색어 없음</li>;\n  };\n\n  const isListVisible = searchString.length !== 0 ? 'flex' : 'none';\n\n  const onClick = (e: MouseEvent<HTMLLIElement>) => {\n    const target = e.currentTarget.dataset.name as string;\n    dispatch(setSearchString(target));\n  };\n\n  const onKeyDown = (e: KeyboardEvent<HTMLLIElement>) => {\n    e.preventDefault();\n    if (e.key === 'ArrowDown') {\n      if (e.currentTarget.nextElementSibling) {\n        const nextTarget = e.currentTarget.nextElementSibling as HTMLLIElement;\n        nextTarget.focus();\n      }\n    }\n    if (e.key === 'ArrowUp') {\n      if (e.currentTarget.previousElementSibling) {\n        const prevTarget = e.currentTarget\n          .previousElementSibling as HTMLLIElement;\n        prevTarget.focus();\n      }\n    }\n    if (e.key === 'Enter') {\n      const target = e.currentTarget.dataset.name as string;\n      dispatch(setSearchString(target));\n    }\n  };\n\n  const onMouseEnter = (e: MouseEvent<HTMLLIElement>) => {\n    if (e.currentTarget) {\n      e.currentTarget.focus();\n    }\n  };\n\n  useEffect(() => {\n    if (listRef.current?.parentElement?.dataset.id === 'desktop') {\n      setIsMobile(false);\n    }\n  }, [listRef]);\n\n  return (\n    <ul\n      role=\"menu\"\n      tabIndex={-1}\n      ref={listRef}\n      className={containerType}\n      style={{ display: isListVisible }}\n    >\n      {whileSearching()}\n      {filteredList.map((item: IItem, idx: number) => {\n        const key = `${item.sickCd}-${idx}`;\n        return (\n          <li\n            key={key}\n            role=\"menuitem\"\n            onClick={onClick}\n            onKeyDown={onKeyDown}\n            onMouseEnter={onMouseEnter}\n            tabIndex={0}\n            data-name={item.sickNm}\n            className={styles.item}\n          >\n            <MagnifierIcon />\n            <span className={styles.name}>\n              <Match sickNm={item.sickNm} />\n            </span>\n          </li>\n        );\n      })}\n    </ul>\n  );\n}\n\nexport default SearchList;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}